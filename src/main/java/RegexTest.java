import org.apache.commons.lang3.RegExUtils;
import org.junit.Test;

import java.util.Locale;
import java.util.UUID;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexTest {

    public static void regex(String sourceStr, String regexStr) {
        Pattern pattern = Pattern.compile(regexStr);
        Matcher matcher = pattern.matcher(sourceStr);
        matcher.replaceAll("1");
        System.out.println("pattern:" + pattern);
        System.out.println(matcher.matches());
        String[] split = "th?id=1".split("th\\?id=");
        System.out.println(split);
    }

    @Test
    public void testRegex() {
        String text = "{\"modelId\":\"6CC0E19A-CC02-42C2-81BD-72F6A4416AD0\",\"bounds\":{\"lowerRight\":{\"x\":1328,\"y\":1050},\"upperLeft\":{\"x\":0,\"y\":0}},\"properties\":{\"process_id\":\"zjbx\",\"name\":\"直接报销\",\"documentation\":\"\",\"process_author\":\"\",\"process_version\":\"\",\"process_namespace\":\"http://www.flowable.org/processdef\",\"executionlisteners\":\"\",\"eventlisteners\":\"\",\"signaldefinitions\":\"\",\"messagedefinitions\":\"\"},\"childShapes\":[{\"resourceId\":\"sid-F9B5DF1E-F9F6-4D2D-8119-5EA8F647C529\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"documentation\":\"\",\"executionlisteners\":\"\",\"initiator\":\"\",\"formkeydefinition\":\"\",\"formproperties\":\"\"},\"stencil\":{\"id\":\"StartNoneEvent\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-EF39F755-459C-4D2D-B0CD-5C0BAED2F604\"}],\"bounds\":{\"lowerRight\":{\"x\":150,\"y\":555},\"upperLeft\":{\"x\":120,\"y\":525}},\"dockers\":[]},{\"resourceId\":\"sid-A7D0E71A-E6DC-4140-A469-E0957A736769\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"exclusivedefinition\":\"false\",\"executionlisteners\":\"\",\"usertaskassignment\":\"\",\"prioritydefinition\":\"\",\"tasklisteners\":\"\",\"skipexpression\":\"\",\"approvalpoints\":\"\",\"privilege\":\"\",\"notify\":\"\",\"isprint\":\"\",\"inform\":\"\",\"printbutton\":\"\",\"cross\":\"\",\"multiinstance_type\":\"None\",\"multiinstance_cardinality\":\"\",\"multiinstance_collection\":\"\",\"multiinstance_variable\":\"\",\"multiinstance_condition\":\"\",\"signmode\":\"\",\"taskconclusion\":\"\"},\"stencil\":{\"id\":\"UserTask\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-E89967CA-E56F-48D9-A475-250811308E2C\"}],\"bounds\":{\"lowerRight\":{\"x\":268,\"y\":580},\"upperLeft\":{\"x\":168,\"y\":500}},\"dockers\":[]},{\"resourceId\":\"sid-EF39F755-459C-4D2D-B0CD-5C0BAED2F604\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"documentation\":\"\",\"conditionsequenceflow\":\"\",\"executionlisteners\":\"\",\"defaultflow\":\"false\"},\"stencil\":{\"id\":\"SequenceFlow\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-A7D0E71A-E6DC-4140-A469-E0957A736769\"}],\"bounds\":{\"lowerRight\":{\"x\":167.71875,\"y\":540},\"upperLeft\":{\"x\":150.265625,\"y\":540}},\"dockers\":[{\"x\":15,\"y\":15},{\"x\":50,\"y\":40}],\"target\":{\"resourceId\":\"sid-A7D0E71A-E6DC-4140-A469-E0957A736769\"}},{\"resourceId\":\"sid-EF267415-4715-4C7D-B5F7-4A194818DA13\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"exclusivedefinition\":\"false\",\"executionlisteners\":\"\",\"usertaskassignment\":{\"assignment\":{\"type\":\"idm\",\"idm\":{\"type\":\"user\",\"assignee\":{\"id\":\"00000000-0000-0000-0000-000000000000\",\"creatorId\":\"00000000-0000-0000-0000-000000000000\",\"creatorNickname\":\"系统管理员\",\"createTime\":1527523200000,\"username\":\"admin\",\"nickname\":\"管理员\",\"letter\":\"xtgly\",\"uniteId\":\"admin\",\"gender\":\"男\",\"password\":null,\"organizationId\":\"0E8A7BEC-5D6C-4626-9C66-47C97A9ACC84\",\"esealAccountId\":null,\"employeeNumber\":null,\"lastLoginTime\":1650784935000,\"failedTimes\":0,\"isModifyInitialPassword\":1,\"modifyPasswordTime\":1624452198000,\"gradeId\":\"C53FE623-A709-40BE-B106-E031EA50D5CF\",\"positionGradeId\":\"81D0E75F-E25E-4EBD-8E98-53FC08FC6C67\",\"remark\":null,\"telephone\":null,\"mobilePhone\":null,\"governmentCard\":null,\"governmentBank\":null,\"governmentCity\":null,\"bonusCard\":null,\"bonusBank\":null,\"bonusCity\":null,\"paymentCard\":null,\"paymentBank\":null,\"paymentCity\":null,\"sealId\":\"448BE53E-B8E5-4C4F-A917-46AEEDB7ACE6\",\"signaturePath\":\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABkAKQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAn/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AKpgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//Z\",\"headPath\":\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCACCAGQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAn/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AKpgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//Z\",\"portalId\":null,\"identityNumber\":null,\"departmentId\":\"0270BC59-784C-4464-BEE6-00C51871CAB8\",\"departmentName\":\"东城街道\",\"userPosition\":null,\"inductionTime\":1611763200000,\"driverFlag\":0,\"isAdministrator\":1,\"supervisorEmployeeId\":null,\"governmentBankNumber\":null,\"paymentBankNumber\":null,\"isForbidden\":0,\"vehicleStandard\":null,\"vehicleStandardControl\":null,\"position\":null,\"content1\":null,\"content2\":null,\"content3\":null,\"content4\":null,\"content5\":null,\"content6\":null,\"content7\":null,\"content8\":null,\"content9\":null,\"content10\":null,\"positionList\":null,\"autoId\":11,\"$$hashKey\":\"object:1726\"}}}},\"prioritydefinition\":\"\",\"tasklisteners\":\"\",\"skipexpression\":\"\",\"approvalpoints\":\"\",\"privilege\":\"\",\"notify\":\"\",\"isprint\":\"\",\"inform\":\"\",\"printbutton\":\"\",\"cross\":\"\",\"multiinstance_type\":\"None\",\"multiinstance_cardinality\":\"\",\"multiinstance_collection\":\"\",\"multiinstance_variable\":\"\",\"multiinstance_condition\":\"\",\"signmode\":\"\",\"taskconclusion\":\"\"},\"stencil\":{\"id\":\"UserTask\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-3923DBF9-5817-4B95-9AA3-F3B85DAB7852\"}],\"bounds\":{\"lowerRight\":{\"x\":415,\"y\":580},\"upperLeft\":{\"x\":315,\"y\":500}},\"dockers\":[]},{\"resourceId\":\"sid-E89967CA-E56F-48D9-A475-250811308E2C\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"documentation\":\"\",\"conditionsequenceflow\":\"\",\"executionlisteners\":\"\",\"defaultflow\":\"false\"},\"stencil\":{\"id\":\"SequenceFlow\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-EF267415-4715-4C7D-B5F7-4A194818DA13\"}],\"bounds\":{\"lowerRight\":{\"x\":314.6171875,\"y\":540},\"upperLeft\":{\"x\":268.3828125,\"y\":540}},\"dockers\":[{\"x\":50,\"y\":40},{\"x\":50,\"y\":40}],\"target\":{\"resourceId\":\"sid-EF267415-4715-4C7D-B5F7-4A194818DA13\"}},{\"resourceId\":\"sid-2A79E58B-4FF1-4817-9A7C-1C86DE4573E3\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"documentation\":\"\",\"executionlisteners\":\"\"},\"stencil\":{\"id\":\"EndNoneEvent\"},\"childShapes\":[],\"outgoing\":[],\"bounds\":{\"lowerRight\":{\"x\":538,\"y\":554},\"upperLeft\":{\"x\":510,\"y\":526}},\"dockers\":[]},{\"resourceId\":\"sid-3923DBF9-5817-4B95-9AA3-F3B85DAB7852\",\"properties\":{\"overrideid\":\"\",\"name\":\"\",\"documentation\":\"\",\"conditionsequenceflow\":\"\",\"executionlisteners\":\"\",\"defaultflow\":\"false\"},\"stencil\":{\"id\":\"SequenceFlow\"},\"childShapes\":[],\"outgoing\":[{\"resourceId\":\"sid-2A79E58B-4FF1-4817-9A7C-1C86DE4573E3\"}],\"bounds\":{\"lowerRight\":{\"x\":509.3359375,\"y\":540},\"upperLeft\":{\"x\":415.6875,\"y\":540}},\"dockers\":[{\"x\":50,\"y\":40},{\"x\":14,\"y\":14}],\"target\":{\"resourceId\":\"sid-2A79E58B-4FF1-4817-9A7C-1C86DE4573E3\"}}],\"stencil\":{\"id\":\"BPMNDiagram\"},\"stencilset\":{\"namespace\":\"http://b3mn.org/stencilset/bpmn2.0#\",\"url\":\"../editor/stencilsets/bpmn2.0/bpmn2.0.json\"}}";
        String originStr = ".*\"assignee\":.\"id\":\"00000000-0000-0000-0000-000000000000\".*?}";
        System.out.println(Pattern.matches(originStr,text));
        String p = "\"assignee\":.\"id\":\"00000000-0000-0000-0000-000000000000\".*?}";

        Pattern pattern = Pattern.compile(p);
        String target = "\"assignee\":{\"id\":\"" + UUID.randomUUID().toString().toUpperCase(Locale.ROOT) + "\",\"nickname\":\"" + UUID.randomUUID().toString().toUpperCase(Locale.ROOT) + "\",\"username\":\"" + UUID.randomUUID().toString().toUpperCase(Locale.ROOT) + "\"}";
        String assignee = RegExUtils.replaceAll(text, pattern, target);
        System.out.println(assignee);
    }
}
